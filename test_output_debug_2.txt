[dotenv@17.2.3] injecting env (43) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`
[2025-11-23T10:49:02.171Z] [CircuitBreaker] Creating circuit breaker for HubSpot API { timeout: 10000, errorThreshold: 50, resetTimeout: 30000 }
[2025-11-23T10:49:02.172Z] [CircuitBreaker] Creating circuit breaker for Explorium API { timeout: 30000, errorThreshold: 40, resetTimeout: 60000 }
[2025-11-23T10:49:02.173Z] [CircuitBreaker] Creating circuit breaker for Lemlist API { timeout: 15000, errorThreshold: 60, resetTimeout: 45000 }
(node:17501) [MODULE_TYPELESS_PACKAGE_JSON] Warning: Module type of file:///home/omar/claude%20-%20sales_auto_skill/tests/integration/test-full-pipeline.js is not specified and it doesn't parse as CommonJS.
Reparsing as ES module because module syntax was detected. This incurs a performance overhead.
To eliminate this warning, add "type": "module" to /home/omar/claude - sales_auto_skill/package.json.
(Use `node --trace-warnings ...` to show where the warning was created)
======================================================================
FULL PIPELINE INTEGRATION TEST
======================================================================

1. Creating test CSV file...
   ‚úÖ Created: /home/omar/claude - sales_auto_skill/test-contacts.csv

2. Importing CSV...
[Import] Reading CSV file: /home/omar/claude - sales_auto_skill/test-contacts.csv
[Import] Found 3 records in CSV
[Import] 3 valid contacts after validation
[Import] 3 unique contacts after deduplication
[Import] Stored 3 contacts in database
[Import] Emitting contacts-imported event for 3 contacts

‚úÖ IMPORT COMPLETE: 3 contacts imported

3. Enriching contacts...
   Enriching: Patrick Collison (patrick+1763894942188@stripe.com)
[2025-11-23T10:49:02.190Z] [EnrichmentWorker] Enriching contact { email: '[REDACTED]' }
   Imported: 3 contacts
   Skipped: 0 contacts

   Waiting for pipeline to complete...
[2025-11-23T10:49:02.191Z] [EnrichmentWorker] Using cached company data { companyKey: 'stripe.com' }
[2025-11-23T10:49:05.454Z] [CircuitBreaker] [DEBUG] Circuit success for Explorium API { latency: 3262 }
[2025-11-23T10:49:06.273Z] [CircuitBreaker] [DEBUG] Circuit success for Explorium API { latency: 2040 }
[2025-11-23T10:49:06.443Z] [CircuitBreaker] [DEBUG] Circuit success for Explorium API { latency: 1689.3333333333333 }
     ‚úÖ Enriched with confidence: 0.7

‚úÖ Enriched 1 contacts
   Sample Enriched Contact:
     Name: Patrick Denton
     Title: Engineering Manager - Stripe Onboarding
     Company: Stripe
     Confidence: 0.7
     Hooks: 1

   Company Data:
     Industry: technology, information and internet
     Employees: N/A
     Technologies: AWS Auto Scaling, AWS Elastic Load Balancer, AWS Identity and Access Management (IAM)
   Enriching: John Collison (john+1763894942188@stripe.com)
[2025-11-23T10:49:06.445Z] [EnrichmentWorker] Enriching contact { email: '[REDACTED]' }
[2025-11-23T10:49:06.445Z] [EnrichmentWorker] Using cached company data { companyKey: 'stripe.com' }
[2025-11-23T10:49:08.006Z] [CircuitBreaker] [DEBUG] Circuit success for Explorium API { latency: 1657 }
[2025-11-23T10:49:08.631Z] [CircuitBreaker] [DEBUG] Circuit success for Explorium API { latency: 1450.6 }
[2025-11-23T10:49:08.781Z] [CircuitBreaker] [DEBUG] Circuit success for Explorium API { latency: 1337.8333333333333 }
     ‚úÖ Enriched with confidence: 0.7

‚úÖ Enriched 2 contacts
   Sample Enriched Contact:
     Name: Patrick Denton
     Title: Engineering Manager - Stripe Onboarding
     Company: Stripe
     Confidence: 0.7
     Hooks: 1

   Company Data:
     Industry: technology, information and internet
     Employees: N/A
     Technologies: AWS Auto Scaling, AWS Elastic Load Balancer, AWS Identity and Access Management (IAM)
   Enriching: Tobi L√ºtke (tobi+1763894942188@shopify.com)
[2025-11-23T10:49:08.781Z] [EnrichmentWorker] Enriching contact { email: '[REDACTED]' }
[2025-11-23T10:49:08.782Z] [EnrichmentWorker] Using cached company data { companyKey: 'shopify.com' }
[2025-11-23T10:49:11.452Z] [CircuitBreaker] [DEBUG] Circuit success for Explorium API { latency: 1528.142857142857 }
[2025-11-23T10:49:11.453Z] [ExploriumClient] No prospect_id returned { email: '[REDACTED]' }
     ‚úÖ Enriched with confidence: N/A

‚úÖ Enriched 3 contacts
   Sample Enriched Contact:
     Name: Patrick Denton
     Title: Engineering Manager - Stripe Onboarding
     Company: Stripe
     Confidence: 0.7
     Hooks: 1

   Company Data:
     Industry: technology, information and internet
     Employees: N/A
     Technologies: AWS Auto Scaling, AWS Elastic Load Balancer, AWS Identity and Access Management (IAM)

   Sample Enriched Contact:
     Name: Patrick Denton
     Title: Engineering Manager - Stripe Onboarding
     Company: Stripe
     LinkedIn: https://linkedin.com/in/patrick-denton
     Email Verified: N/A
     Confidence: 0.7

   Company Data:
     Industry: technology, information and internet
     Employees: N/A
     Technologies: AWS Auto Scaling, AWS Elastic Load Balancer, AWS Identity and Access Management (IAM)

4. Syncing to HubSpot...
   Syncing: patrick@stripe.com
[CRM Sync] Processing contact: patrick@stripe.com
[CRM Sync] Creating new contact: patrick@stripe.com
[2025-11-23T10:49:13.478Z] [CircuitBreaker] Circuit failure for HubSpot API {
  error: 'Property values were not valid: [{"isValid":false,"message":"Property \\"enrichment_source\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"enrichment_source","localizedErrorMessage":"Property \\"enrichment_source\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"why_now_trigger\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"why_now_trigger","localizedErrorMessage":"Property \\"why_now_trigger\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"department\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"department","localizedErrorMessage":"Property \\"department\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"why_now_urgency\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"why_now_urgency","localizedErrorMessage":"Property \\"why_now_urgency\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"personalization_hooks\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"personalization_hooks","localizedErrorMessage":"Property \\"personalization_hooks\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"data_quality_score\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"data_quality_score","localizedErrorMessage":"Property \\"data_quality_score\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"last_enriched\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"last_enriched","localizedErrorMessage":"Property \\"last_enriched\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"pain_confidence\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"pain_confidence","localizedErrorMessage":"Property \\"pain_confidence\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"linkedin_url\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"linkedin_url","localizedErrorMessage":"Property \\"linkedin_url\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"pain_points\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"pain_points","localizedErrorMessage":"Property \\"pain_points\\" does not exist","portalId":[REDACTED]}]',
  errorType: 'Error'
}
[2025-11-23T10:49:13.479Z] [HubSpotClient] HubSpot circuit open, returning error response
[2025-11-23T10:49:13.479Z] [HubSpotClient] createContact failed {
  success: false,
  error: 'HubSpot API is temporarily unavailable. Please try again in a few moments.',
  method: 'createContact',
  timestamp: '[REDACTED]T10:49:[REDACTED]Z'
}
[CRM Sync] Failed to sync contact patrick@stripe.com: Failed to create contact: HubSpot API is temporarily unavailable. Please try again in a few moments.
     ‚ö†Ô∏è  Sync failed: Failed to create contact: HubSpot API is temporarily unavailable. Please try again in a few moments.
   Syncing: john@stripe.com
[CRM Sync] Processing contact: john@stripe.com
[CRM Sync] Creating new contact: john@stripe.com
[2025-11-23T10:49:14.797Z] [CircuitBreaker] Circuit failure for HubSpot API {
  error: 'Property values were not valid: [{"isValid":false,"message":"Property \\"enrichment_source\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"enrichment_source","localizedErrorMessage":"Property \\"enrichment_source\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"why_now_trigger\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"why_now_trigger","localizedErrorMessage":"Property \\"why_now_trigger\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"department\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"department","localizedErrorMessage":"Property \\"department\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"why_now_urgency\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"why_now_urgency","localizedErrorMessage":"Property \\"why_now_urgency\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"personalization_hooks\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"personalization_hooks","localizedErrorMessage":"Property \\"personalization_hooks\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"data_quality_score\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"data_quality_score","localizedErrorMessage":"Property \\"data_quality_score\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"last_enriched\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"last_enriched","localizedErrorMessage":"Property \\"last_enriched\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"pain_confidence\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"pain_confidence","localizedErrorMessage":"Property \\"pain_confidence\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"linkedin_url\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"linkedin_url","localizedErrorMessage":"Property \\"linkedin_url\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"pain_points\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"pain_points","localizedErrorMessage":"Property \\"pain_points\\" does not exist","portalId":[REDACTED]}]',
  errorType: 'Error'
}
[2025-11-23T10:49:14.797Z] [HubSpotClient] HubSpot circuit open, returning error response
[2025-11-23T10:49:14.797Z] [HubSpotClient] createContact failed {
  success: false,
  error: 'HubSpot API is temporarily unavailable. Please try again in a few moments.',
  method: 'createContact',
  timestamp: '[REDACTED]T10:49:[REDACTED]Z'
}
[CRM Sync] Failed to sync contact john@stripe.com: Failed to create contact: HubSpot API is temporarily unavailable. Please try again in a few moments.
     ‚ö†Ô∏è  Sync failed: Failed to create contact: HubSpot API is temporarily unavailable. Please try again in a few moments.
   Syncing: tobi+1763894942188@shopify.com
[CRM Sync] Processing contact: tobi+1763894942188@shopify.com
[CRM Sync] Creating new contact: tobi+1763894942188@shopify.com
[2025-11-23T10:49:16.105Z] [CircuitBreaker] Circuit failure for HubSpot API {
  error: 'Property values were not valid: [{"isValid":false,"message":"Property \\"why_now_urgency\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"why_now_urgency","localizedErrorMessage":"Property \\"why_now_urgency\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"personalization_hooks\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"personalization_hooks","localizedErrorMessage":"Property \\"personalization_hooks\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"data_quality_score\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"data_quality_score","localizedErrorMessage":"Property \\"data_quality_score\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"enrichment_source\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"enrichment_source","localizedErrorMessage":"Property \\"enrichment_source\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"last_enriched\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"last_enriched","localizedErrorMessage":"Property \\"last_enriched\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"pain_confidence\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"pain_confidence","localizedErrorMessage":"Property \\"pain_confidence\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"why_now_trigger\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"why_now_trigger","localizedErrorMessage":"Property \\"why_now_trigger\\" does not exist","portalId":[REDACTED]},{"isValid":false,"message":"Property \\"pain_points\\" does not exist","error":"PROPERTY_DOESNT_EXIST","name":"pain_points","localizedErrorMessage":"Property \\"pain_points\\" does not exist","portalId":[REDACTED]}]',
  errorType: 'Error'
}
[2025-11-23T10:49:16.105Z] [HubSpotClient] HubSpot circuit open, returning error response
[2025-11-23T10:49:16.105Z] [HubSpotClient] createContact failed {
  success: false,
  error: 'HubSpot API is temporarily unavailable. Please try again in a few moments.',
  method: 'createContact',
  timestamp: '[REDACTED]T10:49:[REDACTED]Z'
}
[CRM Sync] Failed to sync contact tobi+1763894942188@shopify.com: Failed to create contact: HubSpot API is temporarily unavailable. Please try again in a few moments.
     ‚ö†Ô∏è  Sync failed: Failed to create contact: HubSpot API is temporarily unavailable. Please try again in a few moments.

======================================================================
TEST SUMMARY
======================================================================
Contacts Imported: 3
Contacts Enriched: 3
Contacts Synced: 0
Errors: 0
Total Time: 13.92s

5. Cleaning up...
   ‚úÖ Deleted: /home/omar/claude - sales_auto_skill/test-contacts.csv

======================================================================
‚ö†Ô∏è  FULL PIPELINE TEST PARTIAL SUCCESS
   Some steps did not complete as expected
======================================================================
